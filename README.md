# 屏幕录制工具

[English](./README_EN.md) | 中文

一个基于Electron的桌面屏幕录制应用，提供简洁易用的界面，支持选择窗口或全屏进行录制。

## 功能特点

- **多种录制模式**：支持录制整个屏幕或单个窗口
- **分辨率选择**：提供多种录制分辨率选项（如原始、1080p、720p等），平衡清晰度与性能
- **音频录制**：可选择是否录制系统声音
- **视频裁剪**：支持对录制的视频进行区域裁剪和时间轴裁剪
- **实时预览**：录制完成后可立即预览录制内容
- **本地保存**：将录制内容保存为MP4格式，使用`ffmpeg`进行H.264编码和优化，提高移动设备兼容性
- **分块录制**：采用分块录制机制，提高长时间录制的稳定性，并在结束后自动合并
- **录制计时器**：显示当前录制时长
- **现代化界面**：采用简洁美观的UI设计，提供流畅的用户体验

## 安装步骤

### 前提条件

- Node.js (推荐v14.0.0或更高版本)
- npm (推荐v6.0.0或更高版本)

### 安装依赖

```bash
# 克隆仓库后，进入项目目录
npm install
```

### 运行应用

```bash
npm start
```

### 构建应用

```bash
npm run build
```

构建完成后，可在`dist`目录找到对应平台的安装包。

## 使用指南

1. **启动应用**：运行应用后，会看到主界面，包含「屏幕录制」、「裁剪视频」和「下载录像」三个按钮。

2. **开始录制**：
   - 点击「屏幕录制」按钮
   - 在弹出的窗口中选择要录制的窗口或屏幕
   - 选择是否录制系统声音
   - 确认选择后，开始录制
   - 录制过程中可以看到录制时长

3. **停止录制**：
   - 录制过程中，「屏幕录制」按钮会变为红色
   - 再次点击该按钮停止录制
   - 录制内容会在预览区域显示

4. **视频裁剪**：
   - 录制完成后，点击「裁剪视频」按钮
   - 选择裁剪方式：「区域裁剪」或「时间裁剪」
   - 区域裁剪：在预览区域通过拖拽选择要保留的视频区域
   - 时间裁剪：通过拖动时间轴上的起始和结束标记，选择要保留的视频片段
   - 点击「应用裁剪」确认，或「取消裁剪」放弃更改

5. **保存录像**：
   - 点击「下载录像」按钮
   - 在弹出的对话框中选择保存位置和文件名
   - 选择保存格式（MP4或WebM）

## 技术栈

- Electron：跨平台桌面应用框架
- HTML/CSS/JavaScript：前端界面
- MediaRecorder API：实现屏幕录制功能
- @electron/remote：主进程与渲染进程通信
- Node.js `fs`：文件系统操作
- `@ffmpeg-installer/ffmpeg` & `fluent-ffmpeg`：用于视频处理（裁剪和编码优化）

## 自动化发布

本项目使用 GitHub Actions 实现自动化构建和发布 Windows 版本。

### 发布新版本

1. 更新 `package.json` 中的版本号
2. 提交更改并推送到 GitHub
3. 创建一个新的标签（格式为 `vX.Y.Z`，例如 `v1.0.1`）
   ```bash
   git tag v1.0.1
   git push origin v1.0.1
   ```
4. GitHub Actions 将自动构建 Windows 版本并创建一个新的 Release

### GitHub Actions 工作流程

- 当推送带有 `v` 前缀的标签时触发构建
- 自动构建 Windows 安装包
- 创建 GitHub Release 并上传构建产物
- 可在 GitHub 仓库的 Releases 页面下载安装包
